[gd_scene load_steps=12 format=3 uid="uid://ending_room"]

[ext_resource type="Script" path="res://scripts/ending_room.gd" id="1_script"]
[ext_resource type="Texture2D" uid="uid://d3yve5e2wph12" path="res://assets/images/backgrounds/desktop.jpg" id="2_desktop"]

[sub_resource type="BoxShape3D" id="FloorShape"]
size = Vector3(12, 0.2, 12)

[sub_resource type="BoxShape3D" id="WallShapeX"]
size = Vector3(12, 5, 0.3)

[sub_resource type="BoxShape3D" id="WallShapeZ"]
size = Vector3(0.3, 5, 12)

[sub_resource type="CapsuleShape3D" id="PlayerShape"]
radius = 0.3
height = 1.8

[sub_resource type="BoxMesh" id="FloorMesh"]
size = Vector3(12, 0.2, 12)

[sub_resource type="BoxMesh" id="WallMeshX"]
size = Vector3(12, 5, 0.3)

[sub_resource type="BoxMesh" id="WallMeshZ"]
size = Vector3(0.3, 5, 12)

[sub_resource type="BoxMesh" id="DeskMesh"]
size = Vector3(2.0, 0.8, 1.0)

[sub_resource type="BoxMesh" id="ScreenMesh"]
size = Vector3(1.4, 1.0, 0.08)

[sub_resource type="StandardMaterial3D" id="FloorMat"]
albedo_color = Color(0.22, 0.2, 0.18, 1)

[sub_resource type="StandardMaterial3D" id="WallMat"]
albedo_color = Color(0.4, 0.38, 0.35, 1)

[sub_resource type="StandardMaterial3D" id="CeilingMat"]
albedo_color = Color(0.5, 0.48, 0.45, 1)

[sub_resource type="StandardMaterial3D" id="DeskMat"]
albedo_color = Color(0.35, 0.25, 0.15, 1)

[sub_resource type="StandardMaterial3D" id="ScreenMat"]
albedo_texture = ExtResource("2_desktop")
emission_enabled = true
emission_texture = ExtResource("2_desktop")
emission_energy_multiplier = 2.0

[sub_resource type="Environment" id="RoomEnv"]
background_mode = 1
background_color = Color(0.1, 0.1, 0.12, 1)
ambient_light_source = 2
ambient_light_color = Color(0.3, 0.28, 0.25, 1)
ambient_light_energy = 0.6
tonemap_mode = 2
ssao_enabled = true
glow_enabled = true
glow_intensity = 0.3

[node name="EndingRoom" type="Node3D"]
script = ExtResource("1_script")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("RoomEnv")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866, -0.433, 0.25, 0, 0.5, 0.866, -0.5, -0.75, 0.433, 3, 6, 3)
light_color = Color(1, 0.95, 0.9, 1)
light_energy = 1.2
shadow_enabled = true

[node name="PointLight3D" type="PointLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.5, 0)
light_color = Color(1, 0.95, 0.85, 1)
light_energy = 2.0
omni_range = 8.0
omni_attenuation = 1.5

[node name="ScreenLight" type="SpotLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0, 1, 0, -1, 0, 0, 1.3, -3.5)
light_color = Color(0.7, 0.8, 1, 1)
light_energy = 3.0
spot_range = 4.0
spot_angle = 50.0

[node name="Floor" type="StaticBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Floor"]
shape = SubResource("FloorShape")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Floor"]
mesh = SubResource("FloorMesh")
surface_material_override/0 = SubResource("FloorMat")

[node name="Ceiling" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ceiling"]
shape = SubResource("FloorShape")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Ceiling"]
mesh = SubResource("FloorMesh")
surface_material_override/0 = SubResource("CeilingMat")

[node name="WallFront" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, -6)

[node name="CollisionShape3D" type="CollisionShape3D" parent="WallFront"]
shape = SubResource("WallShapeX")

[node name="MeshInstance3D" type="MeshInstance3D" parent="WallFront"]
mesh = SubResource("WallMeshX")
surface_material_override/0 = SubResource("WallMat")

[node name="WallBack" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 6)

[node name="CollisionShape3D" type="CollisionShape3D" parent="WallBack"]
shape = SubResource("WallShapeX")

[node name="MeshInstance3D" type="MeshInstance3D" parent="WallBack"]
mesh = SubResource("WallMeshX")
surface_material_override/0 = SubResource("WallMat")

[node name="WallLeft" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6, 2.5, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="WallLeft"]
shape = SubResource("WallShapeZ")

[node name="MeshInstance3D" type="MeshInstance3D" parent="WallLeft"]
mesh = SubResource("WallMeshZ")
surface_material_override/0 = SubResource("WallMat")

[node name="WallRight" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 2.5, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="WallRight"]
shape = SubResource("WallShapeZ")

[node name="MeshInstance3D" type="MeshInstance3D" parent="WallRight"]
mesh = SubResource("WallMeshZ")
surface_material_override/0 = SubResource("WallMat")

[node name="Desk" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4, -5)
mesh = SubResource("DeskMesh")
surface_material_override/0 = SubResource("DeskMat")

[node name="ComputerScreen" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.4, -5.4)
mesh = SubResource("ScreenMesh")
surface_material_override/0 = SubResource("ScreenMat")

[node name="InteractLabel" type="Label3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.2, -5)
pixel_size = 0.01
text = "Press E to enter"
font_size = 32
outline_size = 8

[node name="ThanksText" type="Label3D" parent="."]
transform = Transform3D(0, 0, 1, 0, 1, 0, -1, 0, 0, -5.8, 3, 0)
pixel_size = 0.015
text = "Thanks for playing"
font_size = 48
modulate = Color(1, 1, 1, 1)
outline_size = 6

[node name="CreditsText" type="Label3D" parent="."]
transform = Transform3D(0, 0, -1, 0, 1, 0, 1, 0, 0, 5.8, 3, 0)
pixel_size = 0.008
text = "Made by Mohammed Nassiri
Yassine Esserdaoui
Hamza Sahraoui"
font_size = 36
modulate = Color(1, 1, 1, 1)
outline_size = 4
horizontal_alignment = 1

[node name="JamText" type="Label3D" parent="."]
transform = Transform3D(-1, 0, 0, 0, 1, 0, 0, 0, -1, 0, 3.5, 5.8)
pixel_size = 0.012
text = "1337 Game Jam"
font_size = 42
modulate = Color(1, 0.9, 0.7, 1)
outline_size = 6

[node name="Player" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 2)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player"]
shape = SubResource("PlayerShape")

[node name="Camera3D" type="Camera3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6, 0)
fov = 70.0

